<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- <script>
         var promise1 = new Promise(function(resolve,reject){
             console.log('excutor()')
             setTimeout(function(){
                 resolve('foo')
             },1000)
         })
         
         console.log('new Promise()之后')

         setTimeout(()=>{
             promise1.then(value =>console.log(value),2000)
         })

         console.log(promise1)
    </script> -->
   
    <script>
       function myAsyFunction(url){
           return new Promise((resolve,reject)=>{
        const xhr = new XMLHttpRequest();
           xhr.open('GET',url);
           xhr.onload = function(){
               resolve(JSON.parse(xhr.responseText))
           }

           xhr.onerror = function(){
               reject(xhr.statusText)
           }

           xhr.send();
           })
       };
       //myAsyFunction('https://api.apiopen.top/getJoke?page=1&count=2&type=video')
       myAsyFunction('https://api.apiopen.top/getJoke2?page=1&count=2&type=video')
       .then(
           value => console.log('成功了',value),
           reason => console.log('失败了',reason)
       )




 

       


    </script>
</body>
</html>